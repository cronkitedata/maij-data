<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-04-04">
<meta name="description" content="I’ll use this week to lay out the rest of the semester, since there aren’t many deliverables. But please keep an eye on this for readings.">

<title>Data reporting for investigative journalism - … and we’re almost done!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<meta name="robots" content="noindex">


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/img/djlogo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data reporting for investigative journalism</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"><i class="bi bi-house-door-fill" role="img">
</i> 
 <span class="menu-text"> </span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../weeks/">
 <span class="menu-text">Weeks</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cronkitedata/maijdata/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/sarah_h_cohen/"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">… and we’re almost done!</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../updates.html" class="sidebar-item-text sidebar-link">Updates</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/welcome.html" class="sidebar-item-text sidebar-link">Class Zero</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">Syllabus</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../schedule.html" class="sidebar-item-text sidebar-link">Course schedule</a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../weeks.html" class="sidebar-item-text sidebar-link">Weekly details</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week01-1.html" class="sidebar-item-text sidebar-link">1.1: Intros</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week01-2.html" class="sidebar-item-text sidebar-link">1.2: Reading the story</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week02.html" class="sidebar-item-text sidebar-link">2: Replication / spreadsheet review</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week03-1.html" class="sidebar-item-text sidebar-link">3.1: The life of data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week03-2.html" class="sidebar-item-text sidebar-link">3.2: Install party!</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week04-1.html" class="sidebar-item-text sidebar-link">4: Your first programs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week05.html" class="sidebar-item-text sidebar-link">5: In-depth verbs pt 1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week06.html" class="sidebar-item-text sidebar-link">6: In-depth verbs pt 2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weeks/week07.html" class="sidebar-item-text sidebar-link">7: The power of regular expressions</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Important links</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://cronkitedata.github.io/djtextbook" class="sidebar-item-text sidebar-link">Course textbook</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://asu.instructure.com/courses/138967" class="sidebar-item-text sidebar-link">Canvas</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://asu-2231-mco510-21913.slack.com/" class="sidebar-item-text sidebar-link">Slack</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://bit.ly/dj2022-startme" class="sidebar-item-text sidebar-link">Other links</a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#upcoming-deadlines" id="toc-upcoming-deadlines" class="nav-link active" data-scroll-target="#upcoming-deadlines">Upcoming deadlines</a></li>
  <li><a href="#reading-and-agenda-by-class-date" id="toc-reading-and-agenda-by-class-date" class="nav-link" data-scroll-target="#reading-and-agenda-by-class-date">Reading and agenda by class date</a>
  <ul class="collapse">
  <li><a href="#monday-april-4" id="toc-monday-april-4" class="nav-link" data-scroll-target="#monday-april-4">Monday, April 4</a></li>
  <li><a href="#wednesday-april-6" id="toc-wednesday-april-6" class="nav-link" data-scroll-target="#wednesday-april-6">Wednesday April 6</a></li>
  <li><a href="#wednesday-april-27" id="toc-wednesday-april-27" class="nav-link" data-scroll-target="#wednesday-april-27">Wednesday April 27</a></li>
  </ul></li>
  <li><a href="#recommendations-for-going-further" id="toc-recommendations-for-going-further" class="nav-link" data-scroll-target="#recommendations-for-going-further">Recommendations for going further</a>
  <ul class="collapse">
  <li><a href="#openrefine" id="toc-openrefine" class="nav-link" data-scroll-target="#openrefine">OpenRefine</a></li>
  <li><a href="#scraping" id="toc-scraping" class="nav-link" data-scroll-target="#scraping">Scraping</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">… and we’re almost done!</h1>
</div>

<div>
  <div class="description">
    I’ll use this week to lay out the rest of the semester, since there aren’t many deliverables. But please keep an eye on this for readings.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Class date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 4, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="upcoming-deadlines" class="level2">
<h2 class="anchored" data-anchor-id="upcoming-deadlines">Upcoming deadlines</h2>
<p>Friday 4/8 {.text-dark} * Your database design for the “building a database” assignment. Turn in a link to an Airtable, and be sure you’ve shared it with me (shcohen1@asu.edu)</p>
<p>Sunday 4/10 {.text-dark} * First update to story memo</p>
<p>Sunday 4/17 {.text-dark} * Second update to story memo</p>
<p>Sunday 4/24 {.text-dark} * Final version of story memo and documentation</p>
<p>Friday 5/4 {.text-dark} * Explainer</p>
</section>
<section id="reading-and-agenda-by-class-date" class="level2">
<h2 class="anchored" data-anchor-id="reading-and-agenda-by-class-date">Reading and agenda by class date</h2>
<section id="monday-april-4" class="level3">
<h3 class="anchored" data-anchor-id="monday-april-4">Monday, April 4</h3>
<ul>
<li><p>Textbook chapter : “<a href="https://cronkitedata.github.io/djtextbook/start-build-own.html">Building your own database</a>”</p></li>
<li><p>Sign into Airtable - we’ll do a tutorial on it on Monday. Be sure you know how to sign in.</p></li>
<li><p>Re-review the chapter in the textbook on “<a href="https://cronkitedata.github.io/djtextbook/appendix-program.html">A gentle introduction to programming</a>”. We’re going to introduce looping on Monday, which is exemplified by the restaurant example.</p></li>
</ul>
</section>
<section id="wednesday-april-6" class="level3">
<h3 class="anchored" data-anchor-id="wednesday-april-6">Wednesday April 6</h3>
<p>We’ll be joined by Daniela Porat, senior reporter for Law360 covering employment law, who has been building databases for her stories since she began her reporting career in 2016. Read a couple of her examples (or watch the second one while she shivers in front of the Niagara River).</p>
<ul>
<li><p>“A drumbeat of multiple shootings, but America isn’t listening” , by Sharon LaFraniere , Daniela Porat and Agustin Armendariz, New York Times, May 2016. NOTE: Daniela will be a guest speaker on April 6 so be sure to read it carefully.</p></li>
<li><p>“<a href="https://urldefense.com/v3/__https:/www.investigativepost.org/2018/02/13/training-equipment-deficient-in-police-drowning/">Training , equipment deficient in Police Drowning</a>”, Daniela Porat, Investigative Post and WGRZ in Buffalo. A little context : The Niagara River feeds into Niagara Falls just a short distance from where the police officer drowned – those rapids are among most dangerous in the world. Everyone in their audience already knows that.</p></li>
</ul>
</section>
<section id="wednesday-april-27" class="level3">
<h3 class="anchored" data-anchor-id="wednesday-april-27">Wednesday April 27</h3>
<p>Ethics in data journalism. There is some easy reading and viewing to get ready for this class - it shouldn’t take more than two hours, most of it in the videos. We’ll look at some common cognitive biases that you should consider when working on a data-driven project, and look at some of the best practices to avoid common pitfalls.</p>
<section id="posting-raw-data-on-your-website" class="level4">
<h4 class="anchored" data-anchor-id="posting-raw-data-on-your-website">Posting raw data on your website</h4>
<ul>
<li><p>“<a href="https://source.opennews.org/articles/public-info-doesnt-always-want-be-free/">Public information doesn’t always want to be free</a>”, by Matt Waite, 2013</p></li>
<li><p>Pages 174 to 181 in “<a href="https://cronkitedata.s3.amazonaws.com/docs/post-or-not.pdf">To Post or Not to Post</a>”, by David Craig, Stan Ketterer, and Mohammad Yousuf, Journalism &amp; Mass Communications Quarterly, 2017, via ResearchGate.</p></li>
</ul>
</section>
<section id="ethics-in-scraping" class="level4">
<h4 class="anchored" data-anchor-id="ethics-in-scraping">Ethics in scraping</h4>
<ul>
<li>“<a href="https://www.storybench.org/to-scrape-or-not-to-scrape-the-technical-and-ethical-challenges-of-collecting-data-off-the-web/">To scrape or not to scrape: technical and ethical challenges to collecting data off the web</a>” Sophie Chou, Storybench, April 2016</li>
</ul>
</section>
<section id="common-cognitive-biases-in-data-journalism" class="level4">
<h4 class="anchored" data-anchor-id="common-cognitive-biases-in-data-journalism">Common cognitive biases in data journalism</h4>
<ul>
<li><p><a href="https://onlinejournalismblog.com/2020/04/07/how-to-prevent-confirmation-bias-affecting-your-journalism/">“How to prevent confirmation bias affecting your journalism”</a> Paul Bradshaw, Online Journalism Blog. This is a particularly big problem in data journalism, since we often seek out stories in databases based on tips or broad ideas, and can often find them. If you’re interested (not required), read “<a href="https://onlinejournalismblog.com/2020/03/24/a-journalists-guide-to-cognitive-bias-and-how-to-avoid-it/">A journalist’s guide to cognitive bias (and how to avoid it</a>” for other kinds of biases that we might bring to our reporting. These include common problems in newsrooms, such as a “sunk-cost” bias or a negativity bias.</p></li>
<li><p>BBC Worklife, <a href="https://www.bbc.com/worklife/article/20200827-how-survivorship-bias-can-cause-you-to-make-mistakes">How ‘survivorship bias’ can cause you to make mistakes</a> (just watch the video)</p></li>
<li><p>The videos # 1-4 from the Knight Center for the Americas on “Equity and Ethics in Data Journalism’s” module 3. I’m not thrilled with the pace or specific content with these videos, but they’re the best single spot I’ve found for these common problems. Feel free to speed this up considerably. I found that 1.75 was the right speed for me! (She talks about writing data journalism stories, but she’s never been a journalist of any kind. Sigh.)</p>
<ul>
<li><a href="https://youtu.be/4ndrF2cSqVo">Common mistakes in data analysis</a></li>
<li><a href="https://youtu.be/9nKs7mJukSk">Causal mistakes in data</a></li>
<li><a href="https://youtu.be/f5gMwGfZL3g">Simpson’s paradox in data journalism</a></li>
<li><a href="https://youtu.be/0y3sco0lKzc">Prosecutor’s Fallacy in data journalism</a> OR <a href="https://towardsdatascience.com/the-prosecutors-fallacy-cb0da4e9c039">this piece on prosecutor’s fallacy</a> by Ray Johns, 2019.</li>
</ul></li>
</ul>
<p>“<a href="https://faculty.mccombs.utexas.edu/carlos.carvalho/teaching/regression_to_the_mean.pdf">Fighter pilots and firing coaches</a>”, Brian Burke, 2009, in Advanced Football Analytics, with an explanation of regression to the mean. (This link is to a printout of the original piece, since the website version is a little bit of a mess.) It isn’t very well written, but it eventually gets around to an anecdote about fighter pilots and the concept we care about: “regression to the mean”.</p>
</section>
<section id="accuracy-as-the-ultimate-in-ethics" class="level4">
<h4 class="anchored" data-anchor-id="accuracy-as-the-ultimate-in-ethics">Accuracy as the ultimate in ethics</h4>
<p>There are a lot of bulletproofing pieces out there, but this <a href="https://cronkitedata.s3.amazonaws.com/docs/bulletproof-email.pdf">email from me to Criag Silverman</a>, who at the time wrote “Regret the Error” for Poynter, goes over most of them. (The piece he wrote is no longer on the web.)</p>
</section>
<section id="additional-optional-reading" class="level4">
<h4 class="anchored" data-anchor-id="additional-optional-reading">Additional optional reading:</h4>
<ul>
<li>“<a href="https://source.opennews.org/articles/distrust-your-data/">Distrust your data</a>”, by Jacob Harris, The Source, 2014. At the time, Harris was a news developer at The New York Times.</li>
</ul>
</section>
</section>
</section>
<section id="recommendations-for-going-further" class="level2">
<h2 class="anchored" data-anchor-id="recommendations-for-going-further">Recommendations for going further</h2>
<section id="openrefine" class="level3">
<h3 class="anchored" data-anchor-id="openrefine">OpenRefine</h3>
<p>People who work in digital humanities, such as historians or experts in literature, often need to do many of the data cleaning chores that reporters do. That community has taken to OpenRefine, and there are a ton of good tutorials in that space. Here are a few:</p>
<ul>
<li><a href="http://miriamposner.com/classes/dh201w19/tutorials-guides/data-cleaning-and-manipulation/getting-started-with-openrefine/">UCLA’s Digital Humanities 201 course</a> , by Miriam Posner</li>
<li>Digital humanities OpenRefine lesson from <a href="https://data-lessons.github.io/dh-openrefine/">Data Carpentry</a></li>
</ul>
</section>
<section id="scraping" class="level3">
<h3 class="anchored" data-anchor-id="scraping">Scraping</h3>
<p>Try doing a couple of the other tutorials listed in the textbook. Also, when you sign up for your free DataCamp account, you’ll see some assignments from me. The two that relate to scraping are particularly good.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>