<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-02-07">
<meta name="description" content="This week we’ll get back to working with journalism-related data, and start going deeper into some of the key verbs that you’ll use throughout your R journey.">

<title>Data reporting for investigative journalism - Going further with tidyverse verbs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../assets/img/djlogo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data reporting for investigative journalism</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../weeks/">
 <span class="menu-text">Weeks</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cronkitedata/maijdata/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/sarah_h_cohen/"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#agenda" id="toc-agenda" class="nav-link active" data-scroll-target="#agenda">Agenda</a>
  <ul class="collapse">
  <li><a href="#monday" id="toc-monday" class="nav-link" data-scroll-target="#monday">Monday</a></li>
  <li><a href="#wednesday" id="toc-wednesday" class="nav-link" data-scroll-target="#wednesday">Wednesday</a></li>
  </ul></li>
  <li><a href="#upcoming-deadlines" id="toc-upcoming-deadlines" class="nav-link" data-scroll-target="#upcoming-deadlines">Upcoming deadlines</a></li>
  <li><a href="#preparation-and-learning-materials" id="toc-preparation-and-learning-materials" class="nav-link" data-scroll-target="#preparation-and-learning-materials">Preparation and learning materials</a>
  <ul class="collapse">
  <li><a href="#by-monday-class-27" id="toc-by-monday-class-27" class="nav-link" data-scroll-target="#by-monday-class-27">By Monday class, 2/7</a></li>
  <li><a href="#by-wednesday-class-29" id="toc-by-wednesday-class-29" class="nav-link" data-scroll-target="#by-wednesday-class-29">By Wednesday class, 2/9</a></li>
  </ul></li>
  <li><a href="#after-class-reading-and-review" id="toc-after-class-reading-and-review" class="nav-link" data-scroll-target="#after-class-reading-and-review">After-class reading and review</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Going further with tidyverse verbs</h1>
</div>

<div>
  <div class="description">
    This week we’ll get back to working with journalism-related data, and start going deeper into some of the key verbs that you’ll use throughout your R journey.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 7, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This marks the beginning of collapsing each week’s work into one page on this website.</p>
<p>This week, we’ll go over some details of how to use the most common five verbs: <code>select</code>, <code>arrange</code>, <code>mutate</code>, <code>summarise</code>, <code>group_by</code>, and <code>filter</code> using a data source more likely to yield interesting stories: The Paycheck Protection Program loans for businesses and projects in Arizona.</p>
<p>EDIT: I changed the details of what we’re doing on Wednesday, when we’ll look closer at the <code>filter</code> verb and get an introduction to filtering without an exact match.</p>
<section id="agenda" class="level2">
<h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<section id="monday" class="level3">
<h3 class="anchored" data-anchor-id="monday">Monday</h3>
<ul>
<li>Review the Hot 100 exercise from homework.</li>
<li>Introduce the Paycheck Protection Program data that we’ll use for the next several weeks.</li>
<li>Together, review the first set of verbs of the Tidyverse (likely <code>select</code>, <code>arrange</code>, <code>mutate</code>) and their functions.</li>
</ul>
</section>
<section id="wednesday" class="level3">
<h3 class="anchored" data-anchor-id="wednesday">Wednesday</h3>
<ul>
<li><del>Dig deeper into <code>group_by</code> and <code>summarise</code></del></li>
<li>Dig deeper into <code>filter</code></li>
<li><del>Learn to format numbers so they are readable.</del></li>
</ul>
</section>
</section>
<section id="upcoming-deadlines" class="level2">
<h2 class="anchored" data-anchor-id="upcoming-deadlines">Upcoming deadlines</h2>
<p>Sunday 2/6 {.text-dark} * Billboard Top 100 introductory tutorial. Do the after-class reading before you tackle this. Get as far as you can in 3-4 hours of dedicated work. This exercise will give me guidance on where to spend our time, so it’s more important that you try to do this on your own (with help in #dj-sos or a study hall) than it is that you get the “right” answer. In addition, when you’re struggling over a piece of it and don’t know what to do next, don’t just Google. Instead, walk away from the computer and come back in 10 minutes. If you still don’t know what to do, put a question on #dj-sos, showing your code and the error or answer you’re getting (a screen shot is fine). That way, everyone can learn. You can post anonymously on #dj-sos if you prefer. (Googling will often give you the “hard” R version, not the tidyverse “easy” R version. It will just confuse you at this stage.)</p>
<p>Friday 2/11 {.text-dark} 1st self-assessment</p>
<p>Sunday 2/13 {.text-dark} Do the exercises at the end of Chapter 14: <a href="https://cronkitedata.github.io/djtextbook/r-verb-filter.html">Verbs in Depth: Select, filter, arrange</a> . Some of these are a little tricky - give them a try on your own for a little while before asking for help but please do ask for help if you’re stuck. There is no code for you to copy and paste this time!</p>
</section>
<section id="preparation-and-learning-materials" class="level2">
<h2 class="anchored" data-anchor-id="preparation-and-learning-materials">Preparation and learning materials</h2>
<section id="by-monday-class-27" class="level3">
<h3 class="anchored" data-anchor-id="by-monday-class-27">By Monday class, 2/7</h3>
<p>Mostly, your work is follow-up from last week. But to get ready for the lessons starting this week, please read the documentation/background on the Paycheck Protection Program data in the <a href="https://cronkitedata.github.io/djtextbook/appendix-ppp.html">textbook appendix</a></p>
</section>
<section id="by-wednesday-class-29" class="level3">
<h3 class="anchored" data-anchor-id="by-wednesday-class-29">By Wednesday class, 2/9</h3>
<p>Review these three very different approaches to reporting on the PPP loans. While you don’t need to study them, they’re useful to us for several purposes. First, they show how different people attacked the data to find very different stories. In addition, they will provide you some background on the program itself, written for a lay audience. (We like that.) Finally, they’re relatively old and I have yet to see good stories now that there is more information - I hope it will spark some ideas.</p>
<ul>
<li><a href="https://www.propublica.org/article/ppp-farms">“Hundreds of PPP Loans Went to Fake Farms in Absurd Places”</a>, Derek Willis and Lydia DePillis, ProPublica, May 18, 2021</li>
<li>“<a href="https://www.wsj.com/articles/some-asheville-businesses-thrived-with-government-backed-ppp-loans-others-struggled-11609426801">Six Stories From a Downtown District Show Pandemic’s Uneven Toll</a>”, Anthony DeBarros and Amara Omeokwe, Wall Street Journal, Dec.&nbsp;31, 2020. (Read this on campus if you haven’t signed up for the free WSJ subscription through the library.)</li>
<li><a href="https://revealnews.org/podcast/banking-on-inequity/">“Banking on Inequity”</a> , RevealNews, from reporting by Laura C. Morel, Mohamed Al Elew and Emily Harris, May 1, 2021.</li>
</ul>
</section>
</section>
<section id="after-class-reading-and-review" class="level2">
<h2 class="anchored" data-anchor-id="after-class-reading-and-review">After-class reading and review</h2>
<p>Chapter 14, <a href="https://cronkitedata.github.io/djtextbook/r-verb-filter.html">Verbs in Depth: Select, filter, arrange</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>